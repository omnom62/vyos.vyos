---
merged:
  before:
    bind_to_all: false
  commands:
    - set vrf name vrf-green table 110
    - set vrf name vrf-green vni 1010
    - set vrf name vrf-green description green-vrf
  after:
    bind_to_all: true
    instances:
      - name: "vrf-blue"
        description: "blue-vrf"
        disable: false
        table_id: 100
        vni: 1000
      - name: "vrf-red"
        description: "red-vrf"
        disable: true
        table_id: 101
        vni: 1001
        address_family:
          - afi: "ipv4"
            disable_forwarding: true
            route_maps:
              - rm_name: "rm1"
                protocol: "kernel"
              - rm_name: "rm1"
                protocol: "rip"
          - afi: "ipv6"
            nht_no_resolve_via_default: true

replaced:
  commands:
    - delete vrf bind-to-all
    - set vrf name vrf-blue disable
    - set vrf name vrf-red vni 1011
    - set vrf name vrf-red description Vermillion_VRF
    - delete vrf name vrf-red disable
    - delete vrf name vrf-red ipv6 nht no-resolve-via-default
  after: []

overridden:
  commands:
    - delete vrf name vrf-blue
    - commit
    - set vrf name vrf-blue table 103
    - set vrf name vrf-blue vni 1002
    - set vrf name vrf-blue description blue-vrf
    - set vrf name vrf-blue disable
    - delete vrf bind-to-all
  after: []

deleted:
  commands:
    - delete vrf
  after: []

rendered:
  commands:
    - set vrf bind-to-all
    - set vrf name vrf-green table 105
    - set vrf name vrf-green vni 1000
    - set vrf name vrf-green description green-vrf
    - set vrf name vrf-green disable
    - set vrf name vrf-amber table 111
    - set vrf name vrf-amber vni 1001
    - set vrf name vrf-amber description amber-vrf
    - set vrf name vrf-amber ip protocol kernel route-map rm1
    - set vrf name vrf-amber ip protocol ospf route-map rm1
    - set vrf name vrf-amber ip disable-forwarding

populate_config:
  - set vrf bind-to-all
  - set vrf name vrf-blue description 'blue-vrf'
  - set vrf name vrf-blue table '100'
  - set vrf name vrf-blue vni '1000'
  - set vrf name vrf-red description 'red-vrf'
  - set vrf name vrf-red disable
  - set vrf name vrf-red ip disable-forwarding
  - set vrf name vrf-red ip protocol kernel route-map 'rm1'
  - set vrf name vrf-red ip protocol rip route-map 'rm1'
  - set vrf name vrf-red ipv6 nht no-resolve-via-default
  - set vrf name vrf-red table '101'
  - set vrf name vrf-red vni '1001'
